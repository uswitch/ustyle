// @page Pattern Library/JavaScript
// @name Tabs
//
// @description
//   These are the basic tabs used for landing pages. You can either reference a data-target for the urls or href for the target tabs. They have a non-js fallback and fold over to accordion when in small tablet view. They are initialised on page load if the tabs classes exist.
//
// @javascript
//   var tabs = new Tabs({
//     tabContainer: ".us-tabs",
//     tabLinks: ".us-tabs-nav-mainlink",
//     tabTitle: "us-tab-title",
//     activeClass: "active",
//     changeUrls: true,
//     collapsible: true,
//     autoScroll: false
//   });
//
// @markup
//   <div class='us-tabs'>
//     <nav class='us-tabs-nav'>
//       <div class='us-tabs-nav-wrapper'>
//         <div class='us-tabs-nav-menu'>
//           <a class="us-tabs-nav-mainlink us-tabs-nav-link" href="#tab1">Tab 1</a>
//           <a class="us-tabs-nav-mainlink us-tabs-nav-link" href="#tab2">Tab 2</a>
//           <a class="us-tabs-nav-mainlink us-tabs-nav-link" href="#tab3">Tab 3</a>
//         </div>
//       </div>
//     </nav>
//     <div class='us-tabs-container'>
//       <div class='us-tab' id='tab1'>
//         <h2 class='us-tab-title'><a class="us-tabs-nav-mainlink" href="#tab1">Test 1</a></h2>
//         <div class='us-tab-content'>
//           <p>Fatback capicola leberkas pork loin pork jowl. Meatloaf shoulder pancetta, salami prosciutto ribeye andouille chuck landjaeger short loin filet mignon sirloin. Pork chop tri-tip ham pork hamburger frankfurter leberkas short ribs biltong. Prosciutto ham hock rump, andouille tongue flank sirloin tri-tip ball tip frankfurter ham drumstick meatloaf pork loin.</p>
//         </div>
//       </div>
//       <div class='us-tab' id='tab2'>
//         <h2 class='us-tab-title'><a class="us-tabs-nav-mainlink" href="#tab2">Test 2</a></h2>
//         <div class='us-tab-content'>
//           <p>Kielbasa tenderloin spare ribs, andouille doner brisket chuck drumstick bresaola short loin pork t-bone ground round jowl. Ball tip pork loin doner tongue filet mignon biltong hamburger leberkas. Filet mignon kielbasa kevin short ribs, drumstick chuck shankle spare ribs tri-tip.</p>
//         </div>
//       </div>
//       <div class='us-tab' id='tab3'>
//         <h2 class='us-tab-title'><a class="us-tabs-nav-mainlink" href="#tab3">Test 3</a></h2>
//         <div class='us-tab-content'>
//           <p>Pig pastrami pork loin kielbasa, filet mignon meatloaf short ribs tenderloin. Pork loin leberkas kevin fatback porchetta bresaola. Cow rump shoulder pastrami. Andouille pork belly t-bone short ribs brisket. Bresaola pork belly tail salami capicola meatball. Pork belly beef ham landjaeger.</p>
//         </div>
//       </div>
//     </div>
//   </div>

$tab-width: col-width(2) !default;

@keyframes tab-show {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

// Tab nav
.us-tabs-nav {
  display: none;
  background-color: $c-bggrey;

  @include respond-to(tablet) {
    .js & {
      display: block;
    }
  }

  .js.ie8 & {
    display: block;
  }
}

.us-tabs-nav-wrapper {
  @extend %container;
  // padding-top: $gutter-width / 2;
}

.us-tabs-nav-menu {
  display: table;
  display: -webkit-flex;
  display: flex;
  width: 100%;
  overflow: hidden;
  flex-flow: row;
}

.us-tabs-nav-link {
  @include normal-font;
  position: relative;
  z-index: 1;
  display: table-cell;
  width: $tab-width;
  padding: 8px 1em 12px;
  position: relative;
  color: $c-inputgrey;
  text-align: center;
  vertical-align: middle;
  border-top: 5px solid $c-bggrey;
  // border-right: 1px solid #fff;
  border-radius: 0;
  transition: none;

  &:after {
    position: absolute;
    width: 1px;
    height: 47px;
    content: "";
    right: 0;
    top: -5px;
    background-color: #fff;
  }
  
  @include respond-to(tablet) {
    font-size: em(14px);
    line-height: 1.25em;
  }

  @include respond-to(desktop) {
    font-size: em($base-font-size);
  }

  @include respond-to(large-desktop) {
    font-size: em(18px);
  }

  &:last-child {
    border-right: 0;
  }

  &:hover {
    color: $c-typecyan;
    background-color: rgba(255,255,255,.35);
    border-top: 5px solid $c-typecyan;
  }

  &.active {
    z-index: 2;
    color: $c-typecyan;
    cursor: default;
    background-color: #fff;
    border-top: 5px solid $c-typecyan;
    box-shadow: none;

    &:hover {
      background-color: #fff;
    }
  }
}

// scss-lint:disable Comment, MergeableSelector
.us-tabs-nav-link {
  /* autoprefixer: off */
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -ms-flex-align: center;
  -ms-flex-pack: center;
  -webkit-align-items: center;
  align-items: center;
  -webkit-flex-flow: column;
  -ms-flex-flow: column;
}
// scss-lint:enable Comment, MergeableSelector

// Tabs
.us-tabs-container {
  @extend %container;

  @include respond-to(to-tablet) {
    padding: 0 !important;
  }
}

.us-tab-title {
  @extend %heading-4;
  position: relative;
  margin: 0;
  font-weight: normal;

  @include respond-to(tablet) {
    .js & {
      display: none;
    }
  }

  .js.ie8 & {
    display: none;
  }

  a {
    @include link-colors($c-inputgrey, $c-typecyan, $c-typecyan);
    display: block;
    padding: .5em .75em;
    background-color: $c-bggrey;
    border-top: 4px solid $c-bggrey;
    transition: color 300ms, background-color 300ms;

    .active & {
      color: $c-typecyan;
      background-color: #fff;
      border-top: 4px solid $c-typecyan;
    }

    .active &:before {
      transform: rotate(90deg);
    }

    &:hover {
      color: $c-typecyan;
      background-color: rgba(255,255,255,.35);
      border-top: 4px solid $c-typecyan;
      transition: transform 150ms linear;
    }

    &:hover:before {
      color: #fff;
      transform: rotate(90deg);
    }

    // &:before {
    //   @include arrow(10px, 10px, right);
    //   display: inline-block;
    //   margin-right: .75em;
    //   font-size: .75em;
    //   content: "";
    //   transition: all 300ms;
    // }
  }
}

.us-tab-content {
  @extend %container;
  display: block;
  overflow: hidden;
  opacity: 1;

  .js & {
    max-height: 0;

    @include respond-to(tablet) {
      display: none;
      max-height: none;
    }
  }

  .ie8.js & {
    display: none;
    max-height: none;
  }

  .us-tab.active & {
    max-height: 9999px;
    padding-top: 1em;

    @include respond-to(tablet, true) {
      display: block;
      animation-duration: 1s;
      animation-name: tab-show;
      animation-fill-mode: forwards;
    }
  }
}
